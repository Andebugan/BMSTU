# Архитектура. Понятие чистой архитектуры и хорошей архитектуры в целом

Что такое архитектура?

Уровни решения задачи - то, с какой позиции смотрим на задачу и какие цели при этом преследуем.

Уровни бизнеса, продукта, проекта:
- что решаем
- почему решаем
- для чего решаем
- для кого решаем
- в каких условиях решаем

Уровень архитектуры - как решаем

Знание конечной цели важно, поскольку команда разработчиков не зная конкретной цели преследует цели, поставленные самой командой, что не приводит к решению поставленной задачи.

Главная цель архитектуры/задачи проектирования - упрощение разработки, развёртывания и сопровождения с учётов всех проектных условий.

Естественная стратегия - как можно дольше иметь как можно больше вариантов.

Задачи архитектуры:
- поддержание жизненного цикла ПО
- легкость освоения
- простота разработки, сопровождения и развёртывания

Минимализация затрат на проект и максимизация продуктивности программистов.

- Небольшая команда - монолит
- Несколько небольших команд - по компоненту на команду

Разработка, развёртывания и сопровождения - разные процессы.

Что хорошо для разработки может быть плохо для развёртывания и наоборот.

Зависимость разных аспектов проекта от архитектуры:
* Сверхсильная зависимость - сопровождение (исправление ошибок, модификация, тех. поддержка)
* Сильная зависимость - разработка, развёртывание
* Слабая/неоднозначная зависимость - эффективность
* Почти нулевая зависимость - функциональность

При разработке выделяются политики - бизнес-правила и логика и детали - базы данных, GUI, протоколы, ввод-вывод, фреймворки, библиотеки.

Хороший архитектор максимизирует количество непринятых решений.

При разработке необходимо балансировать неизвестные и переменные факторы.
* Все варианты использования
* Эксплутатационные ограничения
* Структура команды разработчиков
* Треботвания к развёртыванию
* Специфика применения
* Внешняя ситуация

Горизонтальные уровни

Разделение программы по причинам изменений

Уровень - удалённость от ввода-вывода
1. Бизнес правила, связанные с предметной областью
2. Бизнес правила, связанные с приложением
3. UI, база данных, драйвера внешних устройств

Вертикальные узкие срезы

Режем по меняющимся и появляющися вариантам использования

Срез варианта использовани:
- часть UI
- часть бизнес логики приложения
- часть бизнес логики предметной области
- часть базы данных

<!> UseCase диаграмма делит программу на набор вертикальных срезов, по которым реализуется та или иная операция, проходящую через все слои

Тонкости дублирования - устранения истинного дублирования, похожие сущности и алгоритмы в разных уровнях делают разные вещи.

Режимы разделения:
- уровень исходного кода (монолит)
- уровень развёртывания
- уровень локального независимого выполнения
- уровень служб

Разработка архитектуры - искусство проведения разделяющих линий - границ.

Архитектура плагинов:
- независимые высокоуровневые компоненты
- Граница
- низкоуровневые компоненты

Чистая архитектура:
- независимость от фреймворков
- простота тестирования
- независимость от UI
- независимость от базы данных
- независимость от любых внешних агентов

Явная зависимость от назначения

